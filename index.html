<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pictogram Prepper 6000</title>
    <meta name="description" content="Easy way to prepare pictograms with skin tones."/>
    <meta name="author" content="author" />
    <meta name="keywords" content="keywords" />
    <style type="text/css">
      body {
        /* Palette of colors */
        --skin-tone-fair-primary: #ffc6b4;
        --skin-tone-fair-shadow: #ffab90;
        --skin-tone-midtone-primary: #ecc19c;
        --skin-tone-midtone-shadow: #dfb38b;
        --skin-tone-dark-primary: #8a613e;
        --skin-tone-dark-shadow: #764f2a;

        /* Constants of our brand values broken into HSL values (don't need to include L) */
        --brand-blue-h: 215;
        --brand-blue-s: 100%;
        --brand-red-h: 5;
        --brand-red-s: 82%;
        --brand-yellow-h: 36;
        --brand-yellow-s: 78%;
        --brand-green-h: 173;
        --brand-green-s: 68%;

        /* Active colors */
        --angelou-active-h: var(--brand-blue-h);
        --angelou-active-s: var(--brand-blue-s);

        --angelou-active-skin-tone-primary: var(--skin-tone-fair-primary);
        --angelou-active-skin-tone-shadow: var(--skin-tone-fair-shadow);

        font-size: 16px;
        font-family: sans-serif;
      }

      button {
        background-color: #04337A;
        border-radius: 5px;
        color: white;
        cursor: pointer;
        border: none;
        outline: none;
        padding: 12px 16px;
        font-weight: bold;
      }

      #svg-container {
        width: 100%;
      }

      #svg-container svg {
        cursor: crosshair;
        height: 750px;
        width: 100%;
      }

      path:hover,
      rect:hover,
      ellipse:hover {
        stroke: red;
        stroke-width: 0.75px;
      }

      .button-container {
        display: none;
        justify-content: center;
      }

      .button-container button {
        margin: 0 16px;
      }

      .code-container {
        display: none;
        width: 80%;
        margin: 0 auto;
        padding: 50px;
      }
      
      #code {
        background-color: #eaeaea;
        font-family: monospace;
        min-height: 450px;
        padding: 8px;
        width: 100%;
      }

      .dropdown {
        display: none;
      }

      select {
        margin: 0 8px;
      }

      #instructions {
        display: none;
        font-size: 24px;
        font-weight: bold;
        margin: 50px 0;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <p>Welcome to Picto Prepper. Paint out the colors as specified in the dropdown. After you're done, click "convert".</p>
    <p id="instructions">Highlight light skin tones</p>
    <div id="input-container">
      <label>Input SVG markup
        <input id="svg-input" placeholder="<svg><path d='a123123.1231'" value='<svg width="240" height="240" viewBox="0 0 240 240" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5278 139.452C6.81553 170.219 19.9466 192.311 48.233 198.993C76.5195 205.674 100.722 192.364 133.325 182.414C164.306 172.959 210.155 195.932 224.757 164.237C233.185 145.944 207.333 134.039 199.907 106.12C192.48 78.2012 189.91 47.1487 142.779 41.7358C95.649 36.323 96.2203 78.771 69.9416 89.3118C43.6629 99.8525 22.24 108.684 14.5278 139.452Z" fill="#DEECFF"/><path d="M172.642 74.5432C174.271 76.2225 174.23 78.9043 172.551 80.5333C170.872 82.1622 168.19 82.1213 166.562 80.442C164.933 78.7627 164.974 76.0809 166.653 74.4519C168.332 72.823 171.013 72.8639 172.642 74.5432Z" fill="white"/><path opacity="0.5" d="M219.826 102.904C220.333 103.427 220.32 104.262 219.797 104.769C219.274 105.277 218.439 105.264 217.931 104.741C217.424 104.218 217.437 103.383 217.96 102.875C218.483 102.368 219.318 102.381 219.826 102.904Z" fill="#80B5FF"/><path opacity="0.5" d="M34.828 168.428C36.3501 169.998 36.3119 172.504 34.7427 174.026C33.1735 175.549 30.6675 175.51 29.1454 173.941C27.6233 172.372 27.6614 169.865 29.2306 168.343C30.7998 166.821 33.3059 166.859 34.828 168.428Z" fill="#80B5FF"/><path d="M166.425 85.3082C166.933 85.8313 166.92 86.6666 166.397 87.174C165.874 87.6813 165.038 87.6686 164.531 87.1455C164.024 86.6225 164.036 85.7871 164.559 85.2798C165.083 84.7724 165.918 84.7851 166.425 85.3082Z" fill="white"/><path d="M206.32 58.9157C206.828 59.4387 206.815 60.2741 206.292 60.7814C205.769 61.2888 204.933 61.2761 204.426 60.753C203.919 60.23 203.931 59.3946 204.454 58.8873C204.978 58.3799 205.813 58.3926 206.32 58.9157Z" fill="white"/><path d="M206.32 117.033C206.828 117.556 206.815 118.392 206.292 118.899C205.769 119.406 204.933 119.394 204.426 118.871C203.919 118.348 203.931 117.512 204.454 117.005C204.978 116.498 205.813 116.51 206.32 117.033Z" fill="white"/><path d="M125.256 64.4303C126.271 65.4764 126.246 67.1471 125.199 68.1618C124.153 69.1766 122.483 69.1511 121.468 68.105C120.453 67.0589 120.479 65.3882 121.525 64.3734C122.571 63.3587 124.241 63.3841 125.256 64.4303Z" fill="white"/><path d="M239.255 184.353C240.27 185.399 240.245 187.07 239.198 188.084C238.152 189.099 236.482 189.074 235.467 188.027C234.452 186.981 234.478 185.311 235.524 184.296C236.57 183.281 238.241 183.307 239.255 184.353Z" fill="white"/><path opacity="0.8" d="M18.1423 125.619L21.9757 130.519C22.0758 130.646 22.2046 130.746 22.351 130.81C22.4974 130.875 22.657 130.902 22.8159 130.889L28.9389 130.438C29.1217 130.426 29.3042 130.466 29.4661 130.554C29.6279 130.641 29.7627 130.773 29.8554 130.935C29.948 131.096 29.9949 131.281 29.9907 131.468C29.9865 131.655 29.9314 131.838 29.8316 131.995L26.455 137.233C26.3689 137.37 26.3159 137.527 26.3004 137.689C26.2848 137.851 26.3073 138.015 26.3658 138.167L28.6816 143.98C28.7511 144.153 28.7715 144.343 28.7406 144.528C28.7097 144.713 28.6287 144.886 28.5068 145.026C28.3848 145.166 28.2268 145.269 28.0507 145.322C27.8746 145.375 27.6875 145.377 27.5105 145.327L21.5924 143.663C21.4377 143.62 21.2752 143.617 21.1189 143.652C20.9625 143.688 20.8168 143.761 20.6944 143.867L16.0418 147.908C15.9018 148.03 15.7313 148.109 15.5495 148.137C15.3678 148.164 15.1821 148.139 15.0136 148.064C14.8451 147.989 14.7006 147.868 14.5964 147.713C14.4922 147.558 14.4326 147.377 14.4244 147.189L14.1408 140.92C14.1329 140.758 14.0867 140.6 14.0063 140.46C13.9258 140.32 13.8134 140.202 13.6787 140.115L8.46417 136.804C8.30827 136.705 8.18259 136.563 8.10139 136.395C8.02019 136.227 7.98672 136.039 8.00476 135.852C8.0228 135.666 8.09163 135.488 8.20346 135.339C8.31529 135.191 8.46563 135.077 8.63745 135.011L14.3771 132.795C14.5264 132.737 14.6599 132.644 14.766 132.523C14.8722 132.401 14.9477 132.255 14.9863 132.097L16.4566 126.005C16.5047 125.831 16.5979 125.673 16.7265 125.549C16.855 125.425 17.014 125.338 17.1868 125.298C17.3595 125.259 17.5395 125.268 17.7077 125.324C17.8759 125.38 18.026 125.482 18.1423 125.619Z" fill="#ffffff"/><path opacity="0.8" d="M170.104 111.41L172.557 114.425C172.621 114.503 172.704 114.565 172.797 114.605C172.891 114.644 172.993 114.661 173.095 114.653L177.014 114.376C177.131 114.368 177.247 114.393 177.351 114.447C177.455 114.501 177.541 114.582 177.6 114.681C177.66 114.781 177.69 114.894 177.687 115.01C177.684 115.125 177.649 115.237 177.585 115.334L175.424 118.557C175.369 118.642 175.335 118.738 175.325 118.838C175.315 118.938 175.329 119.039 175.367 119.132L176.849 122.709C176.893 122.816 176.907 122.933 176.887 123.047C176.867 123.161 176.815 123.267 176.737 123.353C176.659 123.439 176.558 123.502 176.445 123.535C176.333 123.568 176.213 123.569 176.1 123.538L172.312 122.514C172.213 122.488 172.109 122.486 172.009 122.507C171.909 122.529 171.816 122.575 171.737 122.64L168.76 125.127C168.67 125.202 168.561 125.25 168.444 125.267C168.328 125.284 168.209 125.269 168.101 125.223C167.994 125.177 167.901 125.102 167.834 125.006C167.768 124.911 167.73 124.8 167.724 124.684L167.543 120.826C167.538 120.726 167.508 120.629 167.457 120.543C167.405 120.457 167.333 120.384 167.247 120.331L163.91 118.293C163.81 118.232 163.73 118.145 163.678 118.042C163.626 117.938 163.604 117.822 163.616 117.708C163.627 117.593 163.671 117.483 163.743 117.392C163.815 117.3 163.911 117.23 164.021 117.19L167.694 115.826C167.79 115.791 167.875 115.733 167.943 115.658C168.011 115.584 168.059 115.494 168.084 115.396L169.025 111.648C169.056 111.541 169.115 111.444 169.198 111.367C169.28 111.29 169.382 111.237 169.492 111.213C169.603 111.188 169.718 111.194 169.826 111.229C169.933 111.263 170.029 111.326 170.104 111.41Z" fill="#ffffff"/><path opacity="0.8" d="M83.0194 187.949L85.4728 190.964C85.5368 191.042 85.6193 191.104 85.713 191.144C85.8067 191.183 85.9088 191.2 86.0105 191.192L89.9292 190.915C90.0462 190.907 90.163 190.932 90.2666 190.986C90.3702 191.04 90.4565 191.121 90.5158 191.22C90.5751 191.32 90.605 191.433 90.6023 191.549C90.5997 191.664 90.5644 191.776 90.5005 191.873L88.3395 195.096C88.2844 195.181 88.2505 195.277 88.2406 195.377C88.2306 195.477 88.245 195.578 88.2824 195.671L89.7645 199.248C89.809 199.355 89.8221 199.472 89.8023 199.586C89.7826 199.7 89.7307 199.806 89.6527 199.892C89.5746 199.978 89.4735 200.041 89.3608 200.074C89.2481 200.107 89.1283 200.108 89.0151 200.077L85.2274 199.053C85.1284 199.027 85.0245 199.025 84.9244 199.046C84.8243 199.068 84.7311 199.114 84.6527 199.179L81.675 201.666C81.5855 201.741 81.4763 201.789 81.36 201.806C81.2437 201.823 81.1249 201.808 81.017 201.762C80.9092 201.716 80.8167 201.641 80.75 201.545C80.6833 201.45 80.6452 201.339 80.6399 201.223L80.4584 197.365C80.4534 197.265 80.4238 197.168 80.3723 197.082C80.3209 196.996 80.2489 196.923 80.1627 196.87L76.8254 194.832C76.7256 194.771 76.6452 194.684 76.5932 194.581C76.5412 194.477 76.5198 194.361 76.5314 194.247C76.5429 194.132 76.587 194.022 76.6585 193.931C76.7301 193.839 76.8263 193.769 76.9363 193.729L80.6097 192.365C80.7052 192.33 80.7907 192.272 80.8586 192.197C80.9265 192.123 80.9749 192.033 80.9995 191.935L81.9405 188.187C81.9713 188.08 82.031 187.983 82.1133 187.906C82.1955 187.829 82.2973 187.776 82.4078 187.752C82.5184 187.727 82.6336 187.733 82.7412 187.768C82.8489 187.802 82.945 187.865 83.0194 187.949Z" fill="#ffffff"/><path opacity="0.8" d="M220.723 140.908L219.109 143.565C219.067 143.633 219.041 143.71 219.035 143.791C219.028 143.872 219.039 143.953 219.069 144.027L220.19 146.94C220.214 147.027 220.217 147.118 220.199 147.207C220.18 147.295 220.141 147.377 220.085 147.445C220.028 147.512 219.957 147.563 219.876 147.593C219.796 147.623 219.71 147.63 219.627 147.615L216.781 146.796C216.707 146.777 216.63 146.776 216.556 146.794C216.482 146.811 216.412 146.847 216.352 146.897L214.105 148.933C214.035 148.985 213.954 149.016 213.869 149.025C213.785 149.034 213.699 149.02 213.622 148.983C213.544 148.947 213.476 148.89 213.424 148.818C213.373 148.746 213.339 148.661 213.327 148.571L213.178 145.431C213.174 145.349 213.152 145.269 213.113 145.199C213.074 145.128 213.019 145.069 212.954 145.027L210.462 143.374C210.386 143.325 210.324 143.255 210.284 143.171C210.244 143.086 210.227 142.992 210.235 142.898C210.244 142.804 210.277 142.714 210.331 142.64C210.385 142.565 210.458 142.508 210.541 142.476L213.297 141.36C213.368 141.328 213.431 141.279 213.481 141.218C213.531 141.156 213.567 141.083 213.586 141.004L214.284 137.948C214.312 137.862 214.36 137.786 214.423 137.725C214.487 137.665 214.564 137.623 214.646 137.604C214.729 137.584 214.816 137.587 214.897 137.613C214.978 137.639 215.052 137.686 215.111 137.751L216.96 140.201C217.008 140.266 217.07 140.316 217.14 140.349C217.211 140.382 217.288 140.395 217.364 140.387L220.31 140.153C220.393 140.151 220.476 140.173 220.549 140.216C220.622 140.26 220.683 140.324 220.725 140.401C220.767 140.478 220.789 140.565 220.789 140.654C220.789 140.744 220.766 140.831 220.723 140.908Z" fill="#ffffff"/><path opacity="0.8" d="M211.439 179.653L209.824 182.31C209.782 182.378 209.757 182.455 209.75 182.536C209.743 182.617 209.755 182.698 209.784 182.772L210.905 185.685C210.929 185.771 210.933 185.863 210.914 185.952C210.896 186.04 210.856 186.122 210.8 186.189C210.744 186.257 210.672 186.308 210.592 186.338C210.512 186.368 210.426 186.375 210.342 186.36L207.496 185.541C207.422 185.522 207.345 185.521 207.271 185.539C207.197 185.556 207.127 185.592 207.068 185.642L204.82 187.678C204.75 187.729 204.669 187.761 204.585 187.77C204.5 187.779 204.415 187.764 204.337 187.728C204.259 187.692 204.191 187.635 204.14 187.563C204.088 187.491 204.055 187.406 204.043 187.316L203.893 184.175C203.89 184.094 203.867 184.014 203.828 183.944C203.789 183.873 203.734 183.814 203.669 183.772L201.177 182.119C201.101 182.07 201.039 182 200.999 181.916C200.959 181.831 200.942 181.737 200.951 181.643C200.959 181.549 200.992 181.459 201.046 181.384C201.101 181.31 201.173 181.253 201.257 181.221L204.013 180.104C204.083 180.073 204.146 180.024 204.196 179.962C204.246 179.901 204.282 179.827 204.302 179.748L205 176.693C205.027 176.607 205.075 176.531 205.139 176.47C205.202 176.41 205.279 176.368 205.362 176.348C205.445 176.329 205.531 176.332 205.612 176.358C205.694 176.384 205.767 176.431 205.827 176.496L207.676 178.946C207.723 179.01 207.785 179.061 207.855 179.094C207.926 179.126 208.003 179.139 208.08 179.132L211.025 178.898C211.109 178.896 211.191 178.918 211.264 178.961C211.337 179.005 211.398 179.068 211.44 179.145C211.483 179.222 211.505 179.31 211.504 179.399C211.504 179.489 211.481 179.576 211.439 179.653Z" fill="#B3D3FF"/><path d="M59.7277 22.0739C59.7277 22.0739 40.2518 19.3249 38.8018 64.939C38.0755 73.6269 38.8018 77.6852 38.8018 77.6852L51.5273 76.8183C51.5273 76.8183 53.5718 21.3499 59.7277 22.0739Z" fill="#1D1D1D"/><path d="M68.8037 54.4298C68.8037 54.4298 72.5043 55.5893 74.6147 58.4881C76.7279 61.3868 77.0574 65.4381 77.1528 67.5106C77.2481 69.5832 77.1528 105.374 77.1528 105.374L70.8805 107.131L68.8037 54.4298Z" fill="#B3D3FF"/><path d="M76.4918 204.838C76.4918 204.838 86.7986 211.76 89.2793 212.143C88.154 214.288 85.3408 214.544 85.3408 214.544C85.3408 214.544 78.9981 212.73 77.3869 212.424C75.7757 212.117 70.0724 213.139 70.3282 211.913C70.5839 210.687 71.6581 204.506 71.6581 204.506L76.4918 204.838Z" fill="#106FF3"/><path d="M52.563 205.426C52.563 205.426 62.8698 212.348 65.3506 212.731C64.2253 214.876 61.412 215.132 61.412 215.132C61.412 215.132 55.0694 213.318 53.4582 213.012C51.8469 212.705 46.1437 213.727 46.3994 212.501C46.6552 211.275 47.7294 205.094 47.7294 205.094L52.563 205.426Z" fill="#106FF3"/><path d="M73.5515 99.1003C73.5515 99.1003 83.0655 153.987 82.4773 155.801C81.889 157.64 76.9019 205.12 76.9019 205.12H71.7101C71.7101 205.12 64.4132 159.172 68.8632 155.034C65.3083 143.516 53.6036 129.979 54.064 118.562C54.5243 107.146 66.0324 97.5934 66.0324 97.5934L73.5515 99.1003Z" fill="#0052C4"/><path d="M62.846 99.1L66.5961 109.035C66.5961 109.035 55.0456 191.429 53.0763 205.988C47.5776 205.988 46.9127 205.988 46.9127 205.988C46.9127 205.988 43.1531 158.967 47.0405 152.557C45.6083 137.845 33.3834 110.874 48.6262 99.1255C56.9381 95.6264 62.846 99.1 62.846 99.1Z" fill="#0052C4"/><path opacity="0.2" d="M63.0112 55.0879C63.0112 55.0879 65.8919 55.7595 67.3629 56.0549C68.8338 56.349 73.0977 63.0226 74.0989 65.7253C75.1001 68.428 77.2175 71.519 75.1576 76.2803C73.0963 81.0401 75.1576 86.0329 75.1576 91.8351C75.1576 97.6373 76.1966 102.298 76.3719 104.944C76.5472 107.591 48.7054 108.017 43.2338 103.198C43.2338 103.198 48.7321 94.9696 49.4388 93.7947C50.1455 92.6184 49.5594 86.2116 48.9116 84.5662C48.2637 82.9222 43.9546 68.9283 43.9546 68.9283C43.9546 68.9283 40.4293 58.1806 43.6138 55.7117C46.3805 53.5664 53.9176 52.8018 55.2708 52.3312C56.6254 51.8593 60.2432 54.6776 63.0112 55.0879Z" fill="#1D1D1D"/><path d="M62.3623 52.0665C62.3623 52.0665 67.3333 54.1349 68.8042 54.4303C70.2752 54.7244 75.249 62.0581 76.2502 64.7608C77.2514 67.4635 76.2502 71.519 74.1903 76.2802C72.129 81.0401 74.0711 82.6281 73.1316 87.3894C72.1893 92.1492 75.2294 102.298 75.4046 104.944C75.5799 107.591 47.7381 108.017 42.2665 103.198C42.2665 103.198 47.7648 94.9695 48.4715 93.7946C49.1783 92.6183 48.5921 86.2116 47.9443 84.5662C47.2964 82.9222 42.9873 68.9283 42.9873 68.9283C42.9873 68.9283 39.462 58.1805 42.6466 55.7117C45.4132 53.5663 52.9503 52.8017 54.3035 52.3312C55.6581 51.8593 59.5942 51.6562 62.3623 52.0665Z" fill="#B3D3FF"/><path d="M64.3797 47.183C64.3797 47.183 64.2661 48.2445 64.1273 49.7106C64.0684 50.3618 64.0011 51.0914 63.9422 51.842C63.7697 53.9818 63.6281 56.2952 63.7108 57.4729C63.7108 57.4729 59.3077 61.8798 54.3003 52.3307C54.3003 52.3307 56.4079 48.3929 54.8205 43.0295C53.236 37.6675 64.3797 47.183 64.3797 47.183Z" fill="#A6735B"/><path d="M65.8837 22.7956C65.8837 22.7956 75.7569 25.8918 70.3989 42.9063C65.0395 59.9207 51.5554 40.9359 52.9661 30.5676C54.3753 20.2035 65.8837 22.7956 65.8837 22.7956Z" fill="#A6735B"/><path d="M71.4042 32.722C71.4042 32.722 66.4977 37.5295 58.2889 38.1289C58.2889 38.1289 55.1338 41.8244 54.8898 43.2738C54.8898 43.2738 46.301 28.948 56.5711 23.3326C67.4526 17.3824 74.7149 29.6426 71.4042 32.722Z" fill="#1D1D1D"/><path d="M58.2273 38.032C58.1642 36.7954 57.4 33.9765 55.5574 34.7649C53.7162 35.5533 55.671 41.2934 56.8937 40.9405C56.8937 40.9405 58.3773 40.9643 58.2273 38.032Z" fill="#A6735B"/><path opacity="0.3" d="M64.1279 49.7105C64.069 50.3617 64.0016 51.0913 63.9428 51.8419H63.9413C58.2328 49.0299 57.3592 44.9703 57.3325 44.8456C61.4005 50.0942 64.1279 49.7105 64.1279 49.7105Z" fill="#1D1D1D"/><path d="M53.5732 52.5091C53.5732 52.5091 59.1037 61.5037 63.4914 61.3958C67.8763 61.2922 64.8838 53.0805 64.8838 53.0805C64.8838 53.0805 61.517 50.3918 53.5732 52.5091Z" fill="#A6735B"/><path d="M114.722 98.937H210L191.266 112.854H95.9878L114.722 98.937Z" fill="#0052C4"/><rect x="149.077" y="112.626" width="42.5494" height="106.374" fill="#0052C4"/><path d="M78.8592 103.754H36.5729L53.7015 112.854H95.9878L78.8592 103.754Z" fill="#106FF3"/><rect x="62.0439" y="112.626" width="87.033" height="106.374" fill="#106FF3"/><path d="M53.7012 112.854H148.979L130.245 148.182H34.9668L53.7012 112.854Z" fill="#80B5FF"/><path d="M166.108 125.165H208.394L191.266 112.854H148.979L166.108 125.165Z" fill="#80B5FF"/><path d="M55.946 108.024C54.3014 106.873 52.974 104.604 52.5159 103.614L50.7165 102.906L53.0716 99.5114L54.8093 100.675C55.21 100.923 56.1621 101.531 56.7641 101.984C57.5166 102.55 60.3023 105.597 61.4429 106.796C62.5835 107.995 62.4909 108.678 62.4991 109.492C62.5074 110.305 61.5851 110.992 60.9572 111.256C60.4548 111.466 59.8996 110.609 59.6848 110.155C59.1238 109.924 57.5906 109.175 55.946 108.024Z" fill="#A6735B"/><path opacity="0.2" d="M39.802 63.3077C41.5492 59.1164 43.7815 56.6988 45.1206 57.5082C51.1475 61.152 46.9738 67.9446 46.4903 71.3293C46.1449 73.7468 46.4903 79.2637 46.4903 79.2637L44.1536 74.9121L43.6701 86.5165L48.5053 90.3846V89.4176L58.1756 100.055L52.8569 103.44L35.529 87.7545C34.2936 86.5544 35.3695 71.8128 36.1335 68.6622C36.82 65.0435 38.0548 67.499 39.802 63.3077Z" fill="#1D1D1D"/><path d="M39.5656 58.4753C41.3128 54.284 45.7846 54.1944 47.1238 55.0038C53.1507 58.6475 46.007 68.9117 45.5235 72.2963C45.1781 74.7139 44.5505 84.8677 44.5505 84.8677L57.2088 101.022L51.8901 104.407L34.5622 88.7215C33.3268 87.5214 34.4027 72.7798 35.1667 69.6292C35.8532 66.0106 37.8184 62.6666 39.5656 58.4753Z" fill="#B3D3FF"/><path d="M127 113C130.667 107.833 135.2 96.8 124 94C110 90.5 102 84 103 70.5C104 57 117.5 52 127 51.5C136.5 51 154.5 54 155 67C155.5 80 132 82 129.5 62C127.5 46 145.667 37.3333 155 35" stroke="#80B5FF" stroke-dasharray="2 2"/><ellipse rx="1.3539" ry="0.861574" transform="matrix(-1 0 0 1 154.859 35.3386)" fill="#1D1D1D"/><ellipse rx="0.492328" ry="0.61541" transform="matrix(-1 0 0 1 156.46 35.3386)" fill="#1D1D1D"/><path d="M154.491 34.1816C154.491 34.7254 154.658 34.9693 155.124 34.9693C155.59 34.9693 155.968 34.5285 155.968 33.9847C155.968 33.4408 155.757 33 155.757 33C155.757 33 154.491 33.6378 154.491 34.1816Z" fill="#1D1D1D"/><path d="M154.946 34.1026C155.141 34.61 155.073 34.8976 154.638 35.0652C154.203 35.2329 153.692 34.9574 153.497 34.45C153.301 33.9425 153.339 33.4553 153.339 33.4553C153.339 33.4553 154.75 33.5951 154.946 34.1026Z" fill="#1D1D1D"/></svg>' />
      </label>
      <button onclick="loadSvg()">Load SVG</button>
    </div>
    <div id="svg-container">
    </div>
    <div class="button-container">
      <button onclick="convert()">Convert</button>
      <select onchange="switchBrush(this.options[this.selectedIndex].value)">
        <option value="highlight-primary">Highlight primary skin tone colors</option>
        <option value="highlight-shadow">Highlight shadow skin tone colors</option>
        <option value="highlight-constant">Highlight constant colors</option>
      </select>
      <select onchange="handleThemeChange(this.options[this.selectedIndex].value)" class="dropdown">
        <option value="blue">Blue</option>
        <option value="green">Green</option>
        <option value="red">Red</option>
        <option value="yellow">Yellow</option>
      </select>
      <select onchange="handleSkinChange(this.options[this.selectedIndex].value)" class="dropdown">
        <option value="fair">Fair</option>
        <option value="midtone">Midtone</option>
        <option value="dark">Dark</option>
      </select>
    </div>
    <div class="code-container">
      <textarea id="code"></textarea>
    </div>
  </body>
  <script type="text/javascript">
    function RGBToHSL (r, g, b) {
      r /= 255;
      g /= 255;
      b /= 255;
      const l = Math.max(r, g, b);
      const s = l - Math.min(r, g, b);
      const h = s
        ? l === r
          ? (g - b) / s
          : l === g
          ? 2 + (b - r) / s
          : 4 + (r - g) / s
        : 0;
      return [
        60 * h < 0 ? 60 * h + 360 : 60 * h,
        100 * (s ? (l <= 0.5 ? s / (2 * l - s) : s / (2 - (2 * l - s))) : 0),
        (100 * (2 * l - s)) / 2,
      ];
    };

    function hexToRgb(hex) {
      // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
      var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
      hex = hex.replace(shorthandRegex, function(m, r, g, b) {
        return r + r + g + g + b + b;
      });

      var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    }

    function hslToHex(h, s, l) {
      l /= 100;
      const a = s * Math.min(l, 1 - l) / 100;
      const f = n => {
        const k = (n + h / 30) % 12;
        const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
        return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix "0" if needed
      };
      return `#${f(0)}${f(8)}${f(4)}`;
    }

    function removePaint () {
      paintedPaths.forEach(p => {
        p.el.style.fill = p.fill;
        p.el.style.stroke = p.stroke;
      });
      ignoredPaths.forEach(p => {
        p.el.style.fill = p.fill;
        p.el.style.stroke = p.stroke;
      });
    }

    let activeBrush = "highlight-primary";

    // STEP 1 paint the skin color tones
    // STEP 2 paint any other colors that should be constant between color variations
    let paths = [];
    let correctionPaths = [];
    let paintedPaths = [];
    let ignoredPaths = [];

    // Here we want to switch the paths to use the new HSL variable
    function convert () {

      // Get the backup color
      // This is so the SVG functions via copy/paste in outside contexts
      const computedStyle = window.getComputedStyle(document.body);
      const backupH = computedStyle.getPropertyValue(`--angelou-active-h`);
      const backupS = computedStyle.getPropertyValue(`--angelou-active-s`);

      // Paths that we did not ignore
      correctionPaths.forEach(p => {
        // Get color of each path
        const existingFill = p.getAttribute('fill');
        // Handle fills
        if (existingFill) {
          if (existingFill.charAt(0) === "#") {
            // Here we do calculations to change the fill to use the new brand HSL
            const rgb = hexToRgb(existingFill);
            // Convert RGB to HSL
            const hsl = RGBToHSL(rgb.r, rgb.g, rgb.b);
            // Keep L value, replace H and S with new constant
            const newHsl = `hsl(var(--angelou-active-h, ${backupH}), var(--angelou-active-s, ${backupS}), ${hsl[2]}%)`;
            // Convert back to Hex and fill in
            p.setAttribute('fill', newHsl);
          }
          // Handle HSL replacements for subsequent conversions
          if (existingFill.substring(0, 4) === 'hsl(') {
            // Maintain the old lightness value already calculated
            const oldL = existingFill.split(',')[4];
            // Remove extra characters
            const formattedL = oldL.substring(1, oldL.length - 1);
            const newHsl = `hsl(var(--angelou-active-h, ${backupH}), var(--angelou-active-s, ${backupS}), ${formattedL})`;
            p.setAttribute('fill', newHsl);
          }
        }
        // Handle stroke
        const existingStroke = p.getAttribute('stroke');
        if (existingStroke) {
          if (existingStroke.charAt(0) === "#"){
            const rgb = hexToRgb(existingStroke);
            const hsl = RGBToHSL(rgb.r, rgb.g, rgb.b);
            // Keep L value, replace H and S with new constant
            const newHsl = `hsl(var(--angelou-active-h, ${backupH}), var(--angelou-active-s, ${backupS}), ${hsl[2]}%)`;
            p.setAttribute('stroke', newHsl);
          }
          // Handle HSL replacements for subsequent conversions
          if (existingStroke.substring(0, 4) === 'hsl(') {
            // Maintain the old lightness value already calculated
            const oldL = existingStroke.split(',')[4];
            // Remove extra characters
            const formattedL = oldL.substring(1, oldL.length - 1);
            const newHsl = `hsl(var(--angelou-active-h, ${backupH}), var(--angelou-active-s, ${backupS}), ${formattedL})`;
            p.setAttribute('stroke', newHsl);
          }
        }
      });

      // Remove paint
      removePaint();

      // Show the code
      renderCode();
    }

    function switchBrush (value) {
      activeBrush = value;
      const instructions = document.getElementById("instructions");
      switch (value) {
        case "highlight-primary":
          instructions.innerText = "Highlight light skin tones";
          break;
        case "highlight-shadow":
          instructions.innerText = "Highlight dark skin tones";
          break;
        case "highlight-constant":
          instructions.innerText = "Highlight colors that don't change between drawings";
          break;
      }
    }

    // Updates code at the bottom to show the most recent SVG
    function renderCode () {
      const svg = document.getElementById('svg-container');
      document.getElementById('code').innerText = svg.innerHTML;
      document.getElementsByClassName('code-container')[0].style.display = "block";
      Array.from(document.getElementsByClassName('dropdown')).forEach(el => el.style.display = "block")
    }

    function handleSkinChange(e) {
      // We update our SVG code to set the current value as the default backup
      // Still customizable via CSS variables, but predictable
      const primaryVar = `--skin-tone-${e}-primary`;
      const shadowVar = `--skin-tone-${e}-shadow`;
      const computedStyle = window.getComputedStyle(document.body);
      const backupPrimary = computedStyle.getPropertyValue(primaryVar);
      const backupShadow = computedStyle.getPropertyValue(shadowVar);
      document.body.style.setProperty('--angelou-active-skin-tone-primary', `var(${primaryVar}, ${backupPrimary})`);
      document.body.style.setProperty('--angelou-active-skin-tone-shadow', `var(${shadowVar}, ${backupShadow})`);

      // Recalculate fallback colors and update code at the bottom
      convert();
    }

    function handleThemeChange(e) {  
      const hVar = `--brand-${e}-h`;
      const sVar = `--brand-${e}-s`;
      const computedStyle = window.getComputedStyle(document.body);
      const backupH = computedStyle.getPropertyValue(hVar);
      const backupS = computedStyle.getPropertyValue(sVar);
      document.body.style.setProperty('--angelou-active-h', `var(${hVar})`);
      document.body.style.setProperty('--angelou-active-s', `var(${sVar})`);

      // Recalculate fallback colors and update code at the bottom
      convert();
    }

    function loadSvg () {
      // Unhide interaction buttons
      document.getElementsByClassName('button-container')[0].style.display = "flex";

      // Unhide instructions
      document.getElementById('instructions').style.display = "block";

      // Get the markup
      const svg = document.getElementById('svg-input').value;
      const displayContainer = document.getElementById('svg-container');
      displayContainer.innerHTML = svg;
      document.getElementById('input-container').style.display = "none";

      // Prepare our path arrays
      // In their final state, paths will be all paths without skintones,
      // and correctionPaths will be all paths with skin tones
      // paintedPaths will be a store of objects that tells us what was painted and what it used to look like
      paths = Array.from(document.getElementsByTagName('svg')[0].childNodes).filter(n => n.nodeName !== "#text");
      correctionPaths = Array.from(document.getElementsByTagName('svg')[0].childNodes).filter(n => n.nodeName !== "#text");
      paintedPaths = [];
      ignoredPaths = [];

      paths.forEach(p => {
        p.addEventListener('click', (e) => {
          const target = e.target;
          correctionPaths = correctionPaths.filter(t => t !== target);
          const originalFill = target.getAttribute('fill');
          const originalStroke = target.getAttribute('stroke');
          if (activeBrush === "highlight-constant") {
            target.style.fill = 'pink';
            ignoredPaths.push({
              stroke: originalStroke,
              fill: originalFill,
              el: target
            });
            return;
          }
          const usingLightBrush = activeBrush === "highlight-primary";
          const variableString = usingLightBrush ? `var(--angelou-active-skin-tone-primary, ${originalFill})` : `var(--active-skin-tone-shadow, ${originalStroke})`;
          // Temporarily paint it with a very visible color so we know we're blocking it out
          target.style.fill = usingLightBrush ? '#eb34e1' : '#ab0ea2';
          // Store the original color, this is where we make sure the new color gets consumed
          paintedPaths.push({
            stroke: !originalStroke ? undefined : usingLightBrush ? `var(--angelou-active-skin-tone-primary, ${originalStroke})` : `var(--angelou-active-skin-tone-shadow, ${originalStroke})`,
            fill: !originalFill ? undefined : usingLightBrush ? `var(--angelou-active-skin-tone-primary, ${originalFill})` : `var(--angelou-active-skin-tone-shadow, ${originalFill})`,
            el: target
          });
        });
      });
    }
  </script>
</html>